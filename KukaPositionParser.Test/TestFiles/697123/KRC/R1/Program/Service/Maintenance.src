&ACCESS RVP
&REL 1
&COMMENT MAINTENANCE LOCATION
DEF  MAINTENANCE ( )
;FOLD HISTORY
;================================
;= Robot Process
;= and Application Control
;================================
;ENDFOLD (HISTORY)
;FOLD INI
MODE=#SYNC
IF $PRO_STATE0<>#P_ACTIVE THEN
	CWRITE($CMD,STAT,MODE,"RUN /R1/SPS ()")
ENDIF
OFFSET=0
;FOLD BAS INI
BAS (#INITMOV,0 )
;ENDFOLD
bln_REPLOC=TRUE
;ENDFOLD (INI)

;FOLD PTP HOME Vel=30 % DEFAULT;%{PE}%R 8.3.38,%MKUKATPBASIS,%CMOVE,%VPTP,%P 1:PTP, 2:HOME, 3:, 5:30, 7:DEFAULT
$BWDSTART=FALSE
PDAT_ACT=PDEFAULT
FDAT_ACT=FHOME
BAS(#PTP_PARAMS,30)
$H_POS=XHOME
PTP XHOME 
;ENDFOLD

;FOLD <Delete this line and replace with path to Maintenance position.>
nTC_Handle = Set_Krlmsg (#QUIT, TeslaCore_Msg[1], TC_MsgPar[], TC_MsgOpt_Stop)
WHILE (Exists_KrlMsg(nTC_Handle))
  WAIT SEC 0.024
ENDWHILE
;ENDFOLD

;FOLD HandShake[5 : At Maintenance Position], WAIT on Response
;FOLD ;%{h}
;Params IlfProvider=model3_handshakectrl; Core_CmdTechHandShake=HandShake; Core_CmdHandShake=5; Core_Wait=True
;ENDFOLD
HandShake_Set (5)
HandShake_Check (5)
;ENDFOLD

;FOLD <Delete this line and replace with path to Home position.>
nTC_Handle = Set_Krlmsg (#QUIT, TeslaCore_Msg[1], TC_MsgPar[], TC_MsgOpt_Stop)
WHILE (Exists_KrlMsg(nTC_Handle))
  WAIT SEC 0.024
ENDWHILE
;ENDFOLD

;FOLD PTP HOME  Vel= 100 % DEFAULT;%{PE}%MKUKATPBASIS,%CMOVE,%VPTP,%P 1:PTP, 2:HOME, 3:, 5:100, 7:DEFAULT
$BWDSTART = FALSE
$H_POS=XHOME
PDAT_ACT=PDEFAULT
BAS (#PTP_DAT )
FDAT_ACT=FHOME
BAS (#FRAMES )
BAS (#VEL_PTP,100 )
PTP  XHOME
;ENDFOLD

;FOLD END
bln_REPLOC=FALSE
END
;ENDFOLD
